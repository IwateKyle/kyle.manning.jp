## change ssh port from 22
vim /etc/ssh/sshd_config
find entry labeled as 
port 22
the port might be commented out as
#port 22
in either case, make sure entry is not commented out and change the port to the desired port.
- save the file
> systemctl restart sshd.service
- log out
- log back in.
- try logging back in with the old port number to make sure access is blocked
- try logging in with new port to make sure access as open

## UFW firewall
lets ensure that ufw is running. Depending on your installation - it might already be running.  On my VPS - it was already running, but you might see different results from provider to provider, installation to installation.  The following command should indicate the current status.
> systemctl status ufw.service
in the output line, you want to see 'enabled' in the output.
> Loaded: loaded (/lib/systemd/system/ufw.service; enabled; vendor preset: enabled)
in the next line you want to see 'active' in the output
> Active: active (exited) since Sun 2023-03-19 01:42:31 CET; 1 day 2h ago
The 'active' output indicates that the service is currently started and running.  if the service is not started, from the terminal run:
> systemctl start ufw.service
The 'enabled' output indicates that the service will start automatically upon reboot of the operating system.  The service can be enabled with the enable command.
> systemctl enable ufw.service
you may need to enable UFW independently of systemctl. Do so by 
> ufw enable
choose (y) when prompted.


## restrict port access using UFW firewall
> ufw default allow outgoing
output
> Default outgoing policy changed to 'allow'
> (be sure to update your rules accordingly)
restrict incoming
> ufw default deny incoming
output
> Default incoming policy changed to 'deny'
> (be sure to update your rules accordingly)
add 2222 to allowed incoming ports
> ufw allow 2222
output
> Rules updated
> Rules updated (v6)

## Add a non-root user
> adduser kyle
provid a password when prompted

## ensure that only the newly created user can login
edit the same ssh file as before 
> vim /etc/ssh/sshd_config
find the entry for __PermitRootLogin__ and change setting to be no as such:
> PermitRootLogin no

## copy ssh keys to server
ssh-copy-id -p <port number> <user>@<server-address>
if you don't have any ssh keys created yet, you'll need to stop and generate some first.  They should be place in ~/.ssh

## limit to ssh-key authentication only
> vim /etc/ssh/sshd_config
find entry for __PasswordAuthentication__ and set to __no__ as such
> PasswordAuthentication no
> systemctl restart sshd

## install fail2ban
> apt install fail2ban -y
> systemctl start fail2ban
> systemctl enable fail2ban

## restrict root from having shell access directly

## how to restrict incoming access to certain senders

